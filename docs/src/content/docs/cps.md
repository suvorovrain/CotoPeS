---
title: CPS
description: A reference page in my new Starlight docs site.
---

Для чего это вообще надо? <br/>
Почему мы это учим? <br/>
Зачем проводить допуск на знание CPS? <br/>
Как не запутаться и ней уйти на комсу? <br/>

Про это всё наша методичка.

Для начала рассмотрим хвостые функции и какую они роль играют.

## Хвостовые функции

Рассмотрим довольно простую функцию, которая считает сумму элементов массива

```ocaml
(* int list -> int *)
let rec sum xs =
  match xs with
  | [] -> 0
  | h :: tl -> h + sum tl
```

###### В чем проблема такой функции? <br/>

Проблема в том, что `h + sum tl` **порождает каждый раз новый фрейм на стеке** для того, чтобы обработать повторный вызов `sum tl`. <br/>
Так как нам нужно посчитать `h + sum tl` мы обязаны оставить старый фрейм целым с переменной `h` и создать новый фрейм для подсчета `sum tl` <br/>
Это **заставляет нас все время возвращаться назад** после получения результата.

###### Хвостовая рекурсия

Рассмотрим немного видоизменную функцию, в которую мы добавим **аккумулятор**:

```ocaml
(* int list -> int *)
let sum xs =
  match xs with
  | [] -> acc
  | h :: tl -> sum tl (acc+h)
```

## Что же такое CPS?
